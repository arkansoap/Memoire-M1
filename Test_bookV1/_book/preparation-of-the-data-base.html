<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Preparation of the data base | spotV1</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Preparation of the data base | spotV1" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Preparation of the data base | spotV1" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Thibault FUCHEZ" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="summary.html"/>

<script src="libs/header-attrs-2.8/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#abstract"><i class="fa fa-check"></i><b>1.1</b> Abstract</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#document-format"><i class="fa fa-check"></i><b>1.2</b> Document format</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="metrics-for-classification-tasks.html"><a href="metrics-for-classification-tasks.html"><i class="fa fa-check"></i><b>2</b> Metrics for classification tasks</a>
<ul>
<li class="chapter" data-level="2.1" data-path="metrics-for-classification-tasks.html"><a href="metrics-for-classification-tasks.html#the-foundation-of-the-metrics-the-confusion-matrix"><i class="fa fa-check"></i><b>2.1</b> The foundation of the metrics: The Confusion Matrix</a></li>
<li class="chapter" data-level="2.2" data-path="metrics-for-classification-tasks.html"><a href="metrics-for-classification-tasks.html#accuracy-and-error-rate"><i class="fa fa-check"></i><b>2.2</b> Accuracy and error rate</a></li>
<li class="chapter" data-level="2.3" data-path="metrics-for-classification-tasks.html"><a href="metrics-for-classification-tasks.html#true-positive-rate"><i class="fa fa-check"></i><b>2.3</b> True Positive rate :</a></li>
<li class="chapter" data-level="2.4" data-path="metrics-for-classification-tasks.html"><a href="metrics-for-classification-tasks.html#true-negative-and-flase-positive-rate"><i class="fa fa-check"></i><b>2.4</b> True Negative and Flase positive rate</a></li>
<li class="chapter" data-level="2.5" data-path="metrics-for-classification-tasks.html"><a href="metrics-for-classification-tasks.html#positive-prediction-value-precision"><i class="fa fa-check"></i><b>2.5</b> Positive prediction value : Precision</a></li>
<li class="chapter" data-level="2.6" data-path="metrics-for-classification-tasks.html"><a href="metrics-for-classification-tasks.html#f-measure"><i class="fa fa-check"></i><b>2.6</b> F-measure</a></li>
<li class="chapter" data-level="2.7" data-path="metrics-for-classification-tasks.html"><a href="metrics-for-classification-tasks.html#kappa"><i class="fa fa-check"></i><b>2.7</b> Kappa</a></li>
<li class="chapter" data-level="2.8" data-path="metrics-for-classification-tasks.html"><a href="metrics-for-classification-tasks.html#roc-curve"><i class="fa fa-check"></i><b>2.8</b> ROC Curve</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="classifiers.html"><a href="classifiers.html"><i class="fa fa-check"></i><b>3</b> Classifiers</a>
<ul>
<li class="chapter" data-level="3.1" data-path="classifiers.html"><a href="classifiers.html#lda"><i class="fa fa-check"></i><b>3.1</b> LDA</a></li>
<li class="chapter" data-level="3.2" data-path="classifiers.html"><a href="classifiers.html#logistic-regression-glmnet"><i class="fa fa-check"></i><b>3.2</b> logistic regression / glmnet</a></li>
<li class="chapter" data-level="3.3" data-path="classifiers.html"><a href="classifiers.html#svm"><i class="fa fa-check"></i><b>3.3</b> SVM</a></li>
<li class="chapter" data-level="3.4" data-path="classifiers.html"><a href="classifiers.html#random-forest"><i class="fa fa-check"></i><b>3.4</b> random forest</a></li>
<li class="chapter" data-level="3.5" data-path="classifiers.html"><a href="classifiers.html#naives-bayes"><i class="fa fa-check"></i><b>3.5</b> Naives bayes</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="remedies.html"><a href="remedies.html"><i class="fa fa-check"></i><b>4</b> Remedies</a>
<ul>
<li class="chapter" data-level="4.1" data-path="remedies.html"><a href="remedies.html#pre-processing-resampling"><i class="fa fa-check"></i><b>4.1</b> Pre processing resampling</a></li>
<li class="chapter" data-level="4.2" data-path="remedies.html"><a href="remedies.html#learning-method-tuning"><i class="fa fa-check"></i><b>4.2</b> Learning method tuning</a></li>
<li class="chapter" data-level="4.3" data-path="remedies.html"><a href="remedies.html#post-processinf-threesholding"><i class="fa fa-check"></i><b>4.3</b> post processinf threesholding</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="applications.html"><a href="applications.html"><i class="fa fa-check"></i><b>5</b> Applications</a>
<ul>
<li class="chapter" data-level="5.1" data-path="applications.html"><a href="applications.html#introduction-1"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="applications.html"><a href="applications.html#first-models"><i class="fa fa-check"></i><b>5.2</b> First Models</a></li>
<li class="chapter" data-level="5.3" data-path="applications.html"><a href="applications.html#preprocessing-resampling-methods"><i class="fa fa-check"></i><b>5.3</b> Preprocessing : Resampling methods</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="summary.html"><a href="summary.html"><i class="fa fa-check"></i><b>6</b> Summary</a></li>
<li class="chapter" data-level="7" data-path="preparation-of-the-data-base.html"><a href="preparation-of-the-data-base.html"><i class="fa fa-check"></i><b>7</b> Preparation of the data base</a>
<ul>
<li class="chapter" data-level="7.1" data-path="preparation-of-the-data-base.html"><a href="preparation-of-the-data-base.html#restructuring"><i class="fa fa-check"></i><b>7.1</b> restructuring</a></li>
<li class="chapter" data-level="7.2" data-path="preparation-of-the-data-base.html"><a href="preparation-of-the-data-base.html#partitioning"><i class="fa fa-check"></i><b>7.2</b> Partitioning :</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">spotV1</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="preparation-of-the-data-base" class="section level1" number="7">
<h1><span class="header-section-number">Chapter 7</span> Preparation of the data base</h1>
<div id="restructuring" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> restructuring</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="preparation-of-the-data-base.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#On charge la base de donnée. Les variables de types &quot;str&quot; sont recodées en facteurs.</span></span>
<span id="cb4-2"><a href="preparation-of-the-data-base.html#cb4-2" aria-hidden="true" tabindex="-1"></a>spotify <span class="ot">&lt;-</span></span>
<span id="cb4-3"><a href="preparation-of-the-data-base.html#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read.csv</span>(</span>
<span id="cb4-4"><a href="preparation-of-the-data-base.html#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;spotify_songs.csv&quot;</span>,</span>
<span id="cb4-5"><a href="preparation-of-the-data-base.html#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">header =</span> <span class="cn">TRUE</span>,</span>
<span id="cb4-6"><a href="preparation-of-the-data-base.html#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">&quot;,&quot;</span>,</span>
<span id="cb4-7"><a href="preparation-of-the-data-base.html#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">stringsAsFactors =</span> T</span>
<span id="cb4-8"><a href="preparation-of-the-data-base.html#cb4-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-9"><a href="preparation-of-the-data-base.html#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="preparation-of-the-data-base.html#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Etant données qu&#39;il n&#39;y a que 15 valeurs manquantes, on décide de supprimer les individus contenant ces valeurs.</span></span>
<span id="cb4-11"><a href="preparation-of-the-data-base.html#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(spotify))</span></code></pre></div>
<pre><code>## [1] 15</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="preparation-of-the-data-base.html#cb6-1" aria-hidden="true" tabindex="-1"></a>spotify <span class="ot">=</span> <span class="fu">na.omit</span>(spotify)</span>
<span id="cb6-2"><a href="preparation-of-the-data-base.html#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="preparation-of-the-data-base.html#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Lignes dupliquées :</span></span>
<span id="cb6-4"><a href="preparation-of-the-data-base.html#cb6-4" aria-hidden="true" tabindex="-1"></a>spot1 <span class="ot">&lt;-</span> spotify[<span class="sc">!</span><span class="fu">duplicated</span>(spotify<span class="sc">$</span>track_id), ]</span>
<span id="cb6-5"><a href="preparation-of-the-data-base.html#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># spot2 &lt;- spotify</span></span>
<span id="cb6-6"><a href="preparation-of-the-data-base.html#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co"># spot2 %&gt;% distinct(track_id)</span></span>
<span id="cb6-7"><a href="preparation-of-the-data-base.html#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># spot3 &lt;- spotify[duplicated(spot2$track_id),]</span></span>
<span id="cb6-8"><a href="preparation-of-the-data-base.html#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co"># spot4 &lt;- spotify[!duplicated(spotify$track_name),]</span></span>
<span id="cb6-9"><a href="preparation-of-the-data-base.html#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="preparation-of-the-data-base.html#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co">#Changement du nom des levels:</span></span>
<span id="cb6-11"><a href="preparation-of-the-data-base.html#cb6-11" aria-hidden="true" tabindex="-1"></a>spot1<span class="sc">$</span>key <span class="ot">&lt;-</span> <span class="fu">recode_factor</span>(</span>
<span id="cb6-12"><a href="preparation-of-the-data-base.html#cb6-12" aria-hidden="true" tabindex="-1"></a>  spot1<span class="sc">$</span>key,</span>
<span id="cb6-13"><a href="preparation-of-the-data-base.html#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;0&quot;</span> <span class="ot">=</span> <span class="st">&quot;C&quot;</span>,</span>
<span id="cb6-14"><a href="preparation-of-the-data-base.html#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;1&quot;</span> <span class="ot">=</span> <span class="st">&quot;Db&quot;</span>,</span>
<span id="cb6-15"><a href="preparation-of-the-data-base.html#cb6-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;2&quot;</span> <span class="ot">=</span> <span class="st">&quot;D&quot;</span>,</span>
<span id="cb6-16"><a href="preparation-of-the-data-base.html#cb6-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;3&quot;</span> <span class="ot">=</span> <span class="st">&quot;Eb&quot;</span>,</span>
<span id="cb6-17"><a href="preparation-of-the-data-base.html#cb6-17" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;4&quot;</span> <span class="ot">=</span> <span class="st">&quot;E&quot;</span>,</span>
<span id="cb6-18"><a href="preparation-of-the-data-base.html#cb6-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;5&quot;</span> <span class="ot">=</span> <span class="st">&quot;F&quot;</span>,</span>
<span id="cb6-19"><a href="preparation-of-the-data-base.html#cb6-19" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;6&quot;</span> <span class="ot">=</span> <span class="st">&quot;Gb&quot;</span>,</span>
<span id="cb6-20"><a href="preparation-of-the-data-base.html#cb6-20" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;7&quot;</span> <span class="ot">=</span> <span class="st">&quot;G&quot;</span>,</span>
<span id="cb6-21"><a href="preparation-of-the-data-base.html#cb6-21" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;8&quot;</span> <span class="ot">=</span> <span class="st">&quot;Ab&quot;</span>,</span>
<span id="cb6-22"><a href="preparation-of-the-data-base.html#cb6-22" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;9&quot;</span> <span class="ot">=</span> <span class="st">&quot;A&quot;</span>,</span>
<span id="cb6-23"><a href="preparation-of-the-data-base.html#cb6-23" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;10&quot;</span> <span class="ot">=</span> <span class="st">&quot;Bb&quot;</span>,</span>
<span id="cb6-24"><a href="preparation-of-the-data-base.html#cb6-24" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;11&quot;</span> <span class="ot">=</span> <span class="st">&quot;B&quot;</span></span>
<span id="cb6-25"><a href="preparation-of-the-data-base.html#cb6-25" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-26"><a href="preparation-of-the-data-base.html#cb6-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-27"><a href="preparation-of-the-data-base.html#cb6-27" aria-hidden="true" tabindex="-1"></a>spot1<span class="sc">$</span>mode <span class="ot">&lt;-</span></span>
<span id="cb6-28"><a href="preparation-of-the-data-base.html#cb6-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">recode_factor</span>(spot1<span class="sc">$</span>mode, <span class="st">&quot;0&quot;</span> <span class="ot">=</span> <span class="st">&quot;mineur&quot;</span>, <span class="st">&quot;1&quot;</span> <span class="ot">=</span> <span class="st">&quot;majeur&quot;</span>)</span>
<span id="cb6-29"><a href="preparation-of-the-data-base.html#cb6-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-30"><a href="preparation-of-the-data-base.html#cb6-30" aria-hidden="true" tabindex="-1"></a><span class="co"># recodage de la date / regroupement par tranches :</span></span>
<span id="cb6-31"><a href="preparation-of-the-data-base.html#cb6-31" aria-hidden="true" tabindex="-1"></a>spot1<span class="sc">$</span>track_album_release_date <span class="ot">&lt;-</span></span>
<span id="cb6-32"><a href="preparation-of-the-data-base.html#cb6-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.Date</span>(spot1<span class="sc">$</span>track_album_release_date , <span class="at">format =</span> <span class="st">&quot;%Y&quot;</span>)</span>
<span id="cb6-33"><a href="preparation-of-the-data-base.html#cb6-33" aria-hidden="true" tabindex="-1"></a>spot1 <span class="ot">&lt;-</span> spot1 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">year</span>(track_album_release_date))</span>
<span id="cb6-34"><a href="preparation-of-the-data-base.html#cb6-34" aria-hidden="true" tabindex="-1"></a>spot1<span class="sc">$</span>years <span class="ot">&lt;-</span></span>
<span id="cb6-35"><a href="preparation-of-the-data-base.html#cb6-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cut</span>(</span>
<span id="cb6-36"><a href="preparation-of-the-data-base.html#cb6-36" aria-hidden="true" tabindex="-1"></a>    spot1<span class="sc">$</span>year,</span>
<span id="cb6-37"><a href="preparation-of-the-data-base.html#cb6-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1956</span>, <span class="dv">2000</span>, <span class="dv">2010</span>, <span class="dv">2015</span>, <span class="dv">2018</span>, <span class="dv">2020</span>),</span>
<span id="cb6-38"><a href="preparation-of-the-data-base.html#cb6-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">diag.lab =</span> <span class="dv">0</span>,</span>
<span id="cb6-39"><a href="preparation-of-the-data-base.html#cb6-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb6-40"><a href="preparation-of-the-data-base.html#cb6-40" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;1956-2000&quot;</span>,</span>
<span id="cb6-41"><a href="preparation-of-the-data-base.html#cb6-41" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;2001-2010&quot;</span>,</span>
<span id="cb6-42"><a href="preparation-of-the-data-base.html#cb6-42" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;2011-2015&quot;</span>,</span>
<span id="cb6-43"><a href="preparation-of-the-data-base.html#cb6-43" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;2016-2018&quot;</span>,</span>
<span id="cb6-44"><a href="preparation-of-the-data-base.html#cb6-44" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;2019-2020&quot;</span></span>
<span id="cb6-45"><a href="preparation-of-the-data-base.html#cb6-45" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-46"><a href="preparation-of-the-data-base.html#cb6-46" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-47"><a href="preparation-of-the-data-base.html#cb6-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-48"><a href="preparation-of-the-data-base.html#cb6-48" aria-hidden="true" tabindex="-1"></a><span class="co"># Suppression de instrumentalness mal codé :</span></span>
<span id="cb6-49"><a href="preparation-of-the-data-base.html#cb6-49" aria-hidden="true" tabindex="-1"></a>spot1 <span class="ot">&lt;-</span> spot1[, <span class="sc">-</span><span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">19</span>)]</span>
<span id="cb6-50"><a href="preparation-of-the-data-base.html#cb6-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-51"><a href="preparation-of-the-data-base.html#cb6-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Recodage de track-popularity / regroupement basse/autres :</span></span>
<span id="cb6-52"><a href="preparation-of-the-data-base.html#cb6-52" aria-hidden="true" tabindex="-1"></a>popularity <span class="ot">&lt;-</span> <span class="fu">cut</span>(spot1<span class="sc">$</span>track_popularity, <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="fl">12.5</span>, <span class="dv">100</span>))</span>
<span id="cb6-53"><a href="preparation-of-the-data-base.html#cb6-53" aria-hidden="true" tabindex="-1"></a>spot_B <span class="ot">=</span> <span class="fu">cbind</span>(popularity, spot1)</span>
<span id="cb6-54"><a href="preparation-of-the-data-base.html#cb6-54" aria-hidden="true" tabindex="-1"></a>spot_B <span class="ot">&lt;-</span> spot_B[, <span class="sc">-</span><span class="dv">5</span>]</span>
<span id="cb6-55"><a href="preparation-of-the-data-base.html#cb6-55" aria-hidden="true" tabindex="-1"></a><span class="co"># spot_B$popularity &lt;- recode_factor(spot_B$popularity,</span></span>
<span id="cb6-56"><a href="preparation-of-the-data-base.html#cb6-56" aria-hidden="true" tabindex="-1"></a><span class="co">#                                      &quot;(12.5,100]&quot; = &quot;Autre&quot;,</span></span>
<span id="cb6-57"><a href="preparation-of-the-data-base.html#cb6-57" aria-hidden="true" tabindex="-1"></a><span class="co">#                                      &quot;(-1,12.5]&quot; = &quot;basse&quot;)</span></span>
<span id="cb6-58"><a href="preparation-of-the-data-base.html#cb6-58" aria-hidden="true" tabindex="-1"></a>spot_B<span class="sc">$</span>popularity <span class="ot">&lt;-</span> <span class="fu">recode_factor</span>(spot_B<span class="sc">$</span>popularity,</span>
<span id="cb6-59"><a href="preparation-of-the-data-base.html#cb6-59" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">&quot;(12.5,100]&quot;</span> <span class="ot">=</span> <span class="dv">0</span>,</span>
<span id="cb6-60"><a href="preparation-of-the-data-base.html#cb6-60" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">&quot;(-1,12.5]&quot;</span> <span class="ot">=</span> <span class="dv">1</span>)</span>
<span id="cb6-61"><a href="preparation-of-the-data-base.html#cb6-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-62"><a href="preparation-of-the-data-base.html#cb6-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-63"><a href="preparation-of-the-data-base.html#cb6-63" aria-hidden="true" tabindex="-1"></a><span class="co"># On enlève les variables non pertinentes pour la classification :</span></span>
<span id="cb6-64"><a href="preparation-of-the-data-base.html#cb6-64" aria-hidden="true" tabindex="-1"></a>spot_B <span class="ot">&lt;-</span> spot_B[, <span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">10</span>,<span class="dv">23</span>)]</span>
<span id="cb6-65"><a href="preparation-of-the-data-base.html#cb6-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-66"><a href="preparation-of-the-data-base.html#cb6-66" aria-hidden="true" tabindex="-1"></a><span class="co"># On efface les bases inutiles</span></span>
<span id="cb6-67"><a href="preparation-of-the-data-base.html#cb6-67" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(spot1, spotify)</span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="preparation-of-the-data-base.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(spot_B<span class="sc">$</span>popularity)</span></code></pre></div>
<p><img src="Test_book_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>We can observe a high imbalanced repartition on the “popularity” variable.</p>
</div>
<div id="partitioning" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> Partitioning :</h2>
<p>Training and test sets are created with random sampling. First, we split the training set off. Then whe create the evaluation and test sets. Hence we create two groups of datas, one which is standardize and the other which is not. You can see the functions used in the functions_UCR.R file.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="preparation-of-the-data-base.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#posssibilité de changer les paramètres prop1, prop2, seed1, seed2</span></span>
<span id="cb8-2"><a href="preparation-of-the-data-base.html#cb8-2" aria-hidden="true" tabindex="-1"></a>datas <span class="ot">&lt;-</span> <span class="fu">split_standard</span>(spot_B, <span class="st">&quot;popularity&quot;</span>, <span class="at">mod =</span> <span class="st">&quot;standard&quot;</span>)</span>
<span id="cb8-3"><a href="preparation-of-the-data-base.html#cb8-3" aria-hidden="true" tabindex="-1"></a>datasNS <span class="ot">&lt;-</span> <span class="fu">split_standard</span>(spot_B, <span class="st">&quot;popularity&quot;</span>, <span class="at">mod =</span> <span class="st">&quot;nonstandard&quot;</span>)</span>
<span id="cb8-4"><a href="preparation-of-the-data-base.html#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># verif</span></span>
<span id="cb8-5"><a href="preparation-of-the-data-base.html#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">nrow</span>(datas<span class="sc">$</span>train),<span class="fu">nrow</span>(datas<span class="sc">$</span>test),<span class="fu">nrow</span>(datas<span class="sc">$</span>eval))<span class="sc">==</span><span class="fu">nrow</span>(spot_B)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="summary.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Test_book.pdf", "Test_book.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
